---
title: |
  | Supplementary materials for
  | "Here Comes the STRAIN: Analyzing Defensive Pass Rush in American Football with Player Tracking Data"
blinded: 0
bibliography: bibliography.bib
output: rticles::asa_article
---

```{r}
#| label: setup
#| include: false
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE,
  fig.align = "center",
  fig.pos = "p"
)
library(here)
library(tidyverse)
```


# Old Multilevel Model for Play-Level STRAIN {#sec:multilevel}

We additionally fit a multilevel model to evaluate pass rushers' impact on the average STRAIN observed in a play, while accounting for their pass blocker, QB, and play-level attributes. This version of our model has random intercepts for the three player groups: (1) pass rushers as $R$, (2) nearest pass blockers as $B$, and (3) QBs as $Q$.
As before, the coefficients $\boldsymbol \beta$ associated with covariate vector $\mathbf{x_{ij}}$ for pass rusher $j$ in play $i$ are estimated as fixed-effects. 
This version of our model for the average STRAIN by pass rusher $j$ on play $i$ is as follows.
\begin{equation}
\begin{aligned}
\overline{\text{STRAIN}}_{ij} &\sim N(R_{j[i]} + B_{b[ij]} + Q_{q[i]} + \mathbf{x_{ij}} \boldsymbol{\beta}, \sigma^2), \text{ for } i = 1, \dots, n \text{ plays} \\
R_{j} &\sim N(\mu_R, \sigma^2_R), \text{ for } j = 1, \cdots, \text{ \# of pass rushers}, \\
B_{b} &\sim N(\mu_B, \sigma^2_B), \text{ for } b = 1, \cdots, \text{ \# of pass blockers}, \\
Q_{q} &\sim N(\mu_Q, \sigma^2_Q), \text{ for } q = 1, \cdots, \text{ \# of QBs}.
\end{aligned}
\end{equation}

We consider a normal distribution to obtain the random intercepts for each player toward their respective position group means.


# Team effects justification

We perform leave-one-week-out cross-validation (LOWO CV)

We evaluate the model performance based on mean squared error (MSE)

```{r}
source(here("scripts", "10_multilevel_mod.R"))
fig_loocv_team_eff
```

